---

# 教程

## 使用说明

### `print_custom.h`

#### 基本功能

`print_custom` 是一个用于显示格式化文本的函数，适用于需要显示中文字符或其他多字节字符的场景。它允许用户指定姓名括号的样式、文本的引号样式、姓名与文本之间的换行方式、输出前后的换行行为，以及在输出完成后是否暂停等待用户输入。

#### 函数参数详解

- **const wchar_t\* name**: 要显示的姓名，必须是宽字符串字面值，用于正确处理多字节字符。
- **const wchar_t\* text**: 要显示的文本，同样必须是宽字符串字面值。
- **int bracket_type**: 控制姓名括号的样式。
  - `1`: 使用方括号 `[ ]`
  - `2`: 使用全角方括号 `【 】`
  - `3`: 使用角括号 `「 」`
  - 默认: 使用圆括号 `( )`
- **int quote_type**: 控制文本引号的样式。
  - `1`: 使用中文引号 “ ”
  - 默认: 使用英文引号 " "
- **int newline_type**: 控制姓名与文本之间是否添加换行。
  - `1`: 添加换行
  - `0`: 不添加换行
- **int pre_line_break**: 控制在姓名框前是否添加空行。
  - `1`: 添加一个空行
  - `0`: 不添加空行
- **int post_line_breaks**: 控制在文本后添加的换行次数。
  - `1`: 添加两个换行
  - `0`: 添加一个换行
- **int wait_for_input**: 控制输出完成后是否等待用户输入继续。
  - `1`: 等待用户按下任何键
  - `0`: 不等待，直接继续执行

#### 为什么必须使用 `L` 前缀

`L` 前缀用于标识字符串为宽字符串字面值（wchar_t 类型），这对于处理包括中文在内的多字节字符集至关重要。在C语言中，不使用 `L` 前缀的字符串默认为单字节字符数组（char 类型），这可能导致字符编码错误，特别是在涉及非ASCII字符时。

#### 等待输入引起的额外换行解释

在 `print_custom` 函数中使用 `getwchar()` 等待用户输入时，通常在用户按下回车键以继续之后会出现一个看似额外的换行。这是因为回车键本身就会在控制台中生成一个新的行，这是控制台行为的一部分，并不是由 `getwchar()` 函数直接控制的。因此，即使在文本后已经添加了预定的换行，回车键的按下仍会造成另一行的出现，给用户的感觉就像是添加了额外的换行。

#### 示例代码

```c
#include "print_custom.h"

int main() {
    print_custom(L"张三", L"这是示例文本", 2, 1, 0, 0, 1, 1);
    print_custom(L"李四", L"欢迎使用", 1, 0, 1, 0, 0, 0);
    return 0;
}
```

这个示例展示了如何使用 `print_custom` 函数，包括如何格式化姓名和文本，控制换行以及处理用户输入。

### `print_basic` 函数的指南

```c
print_basic(L"名称", L"文字", "0", 0);   // 主题 0
print_basic(L"名称", L"文字", "1-A", 0); // 主题 1-A
```

名称与文字前的引号前必须使用"L"前缀，第三个参数用于填写主题，默认是主题0，其余12个主题不能用数字填写，只能填写原名，例如"1-A","3-B","3-D","2-B","2-A"，最后一个参数表示是否需要用户按回车来继续执行，1为需要，0为不需要，会造成无法取消的空格。

#### 主题说明

- **主题0/default** 无姓名框 无引号
  - 姓名框前不换行，中间不换行，末尾换一行

- **主题1-A** 【】 “”
  - 姓名框前不换行，中间不换行，末尾换一行

- **主题2-A** [] ""
  - 姓名框前不换行，中间不换行，末尾换一行

- **主题3-A** 「」 “”
  - 姓名框前不换行，中间不换行，末尾换一行

- **主题1-B** 【】 “”
  - 姓名框前不换行，中间换行，末尾换一行

- **主题2-B** [] ""
  - 姓名框前不换行，中间换行，末尾换一行

- **主题3-B** 「」 “”
  - 姓名框前不换行，中间换行，末尾换一行

- **主题1-C** 【】 “”
  - 姓名框前不换行，中间不换行，末尾换两行

- **主题2-C** [] ""
  - 姓名框前不换行，中间不换行，末尾换两行

- **主题3-C** 「」 “”
  - 姓名框前不换行，中间不换行，末尾换两行

- **主题1-D** 【】 “”
  - 姓名框前不换行，中间换行，末尾换两行

- **主题2-D** [] ""
  - 姓名框前不换行，中间换行，末尾换两行

- **主题3-D** 「」 “”
  - 姓名框前不换行，中间换行，末尾换两行

### 使用 `print_basic` 和 `print_custom` 的相同效果

以下两语句功能完全相同：

```c
print_custom(L"晓美焰", L"我要玩圆神", 2, 1, 1, 0, 0, 1);
print_basic(L"晓美焰", L"我要玩圆神", "1-B", 1); // 主题 1-B
```

这意味着在使用 `print_custom` 和 `print_basic` 时，可以根据需要选择合适的函数来实现相同的效果。

### `setup` 中各函数的功能

- **set_title**：直接把标题设置为指定的内容。
- **ptitle**：将标题设定为“参数 - PrintGfx Console Release”这种格式。
- **title**：把标题直接设置为预定义的内容，默认值为 "PrintGfx Console Release"。
- **dx_end**：将标题设定为 "PrintGfx Console Release"，并显示 "Game processes have terminated\n"。
- **clear**：用于清屏。

### 示例代码

以下是一个完整的示例，展示如何使用 `print_custom`、`print_basic` 和 `setup` 系列函数：

```c
#include "print_custom.h"
#include "print_basic.h"
#include "setup.h"

int main() {
    title(); // 设置默认游戏标题

    printf("一个普通的下午，你走在城市的街道上，突然看到一位老人向你招手。\n");
    Sleep(1000);

    ptitle("城市街道");
    print_basic(L"老人", L"你好，年轻人。我有一个任务需要你的帮助。", "1-B", 1);
    Sleep(1000);

    printf("1. 询问老人需要什么帮助\n");
    printf("2. 离开，不予理会\n");

    char choice;
    scanf(" %c", &choice);
    getchar(); // 清除缓冲区中的换行符

    if (choice == '1') {
        set_title("城市 - 帮助老人");
        print_basic(L"你", L"您好，请问需要什么帮助？", "1-B", 1);
        Sleep(1000);

        print_basic(L"老人", L"谢谢你，我需要你帮我找回我的拐杖，它就在附近的公园里。", "1-B", 1);
        ptitle("公园");
        print_basic(L"你", L"好的，我马上去找。", "1-B", 1);
        Sleep(1000);

        print_basic(L"你", L"你在公园里找到了老人的拐杖，并将它带回给老人。", "1-B", 1);
        ptitle("城市街道");
        print_basic(L"老人", L"非常感谢你，年轻人。这是你的奖励。", "1-B", 1);
    } else {
        set_title("城市 - 离开");
        print_basic(L"你", L"对不起，我现在有事，不能帮你。", "1-B", 1);
        Sleep(1000);

        print_basic(L"老人", L"没关系，祝你好运。", "1-B", 1);
    }



    dx_end(); // 游戏结束
    return 0; // 退出程序
}
```

通过这个示例，你可以看到如何使用各个函数来实现游戏中的对话和场景切换。根据需要，你可以扩展这个示例以适应更复杂的场景和交互。